#!/usr/bin/env ruby
require 'wordfreq'

content = ARGF.read
delim = (ARGV.member? '-c') ? (:chars) : (:words)

wf = Wordfreq.calculate(content, delim).sort_by { |k,v| -v.to_i }
max_len = wf.first.first.length rescue 0
width = max_len + 2


for pair in wf
  $stdout.puts(pair[0].ljust(width + 10) + pair[1].to_s)
end